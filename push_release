# Sourcing local .env file
source ./.env

# Wipe previous version output
rm current-version.txt

# Description: Push a new release to github
git add .

# Build binary tagged with version + commit hash
go build -o ./Username-Generator

# Commit changes
git commit -m "Release $(./Username-Generator --version | cut -d' ' -f3)"

# Push changes
git push

# Create a new tag
git tag $(./Username-Generator --version | cut -d' ' -f3)

# Push tag
git push --tags

# Output current version
./Username-Generator --version | cut -d' ' -f3 > current-version.txt