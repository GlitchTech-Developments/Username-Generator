# Sourcing local .env file
source ./.env

# Wipe previous version output
rm current-version.txt

# Description: Push a new release to github
git add .

# Build binary tagged with version + commit hash
go build -o ./Username-Generator

# Commit changes
git commit -m "Release v0.1.0-rc$(git rev-parse --short HEAD)"

# Push changes
git push

# Create a new tag
git tag v0.1.0-rc$(git rev-parse --short HEAD)

# Push tag
git push --tags

# Output current version
v0.1.0-rc$(git rev-parse --short HEAD) > current-version.txt